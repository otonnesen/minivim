Based heavily on antirez's kilo editor: https://github.com/antirez/kilo.
